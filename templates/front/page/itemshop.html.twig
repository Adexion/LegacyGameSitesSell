{% extends 'front/base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('itemshopStyle') }}
    <script src="https://www.paypal.com/sdk/js?client-id={{ paypalClient }}&currency=PLN"></script>
{% endblock %}

{% block body %}
    <div class="container pt-2">
        <div class="row">
            {% include 'front/component/notLogged.html.twig' %}
            {% include 'front/component/wallet.html.twig' %}
            <div class="w-100" id="error-container">
            </div>
            <div class="d-inline-flex w-100 flex-wrap flex-column">
                {% for itemList in itemLists %}
                    <div class="item-list bg-light p-2">
                        <div class="item-list-content">
                            <img src="{{ itemList.icon }}" alt="{{ itemList.name }}">
                            <hr/>
                            <div class="p-2">
                                <p class="font-weight-bold h5">{{ itemList.name }}</p>
                                {{ itemList.description | raw }}
                            </div>
                            <hr/>
                        </div>
                        <div>
                            <p class="price float-left">
                                <i class="fas fa-coins"></i>
                                {{ itemList.afterPromotionPrice | number_format(2) }}
                                <strong>zł</strong>
                            </p>
                            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                                <div class="float-right">
                                    <form action="{{ path('wallet-payment') }}" method="post" class="d-inline-block">
                                        <input type="hidden" name="itemListId" value="{{ itemList.id }}">
                                        <button class="btn btn-info" id="prepaid" type="submit">
                                            Zapłać z Prepaida
                                        </button>
                                    </form>
                                    <button data-item-list-id="{{ itemList.id }}" type="button"
                                            class="btn btn-primary  open-modal" data-toggle="modal"
                                            data-target="#modal">
                                        Zapłać
                                    </button>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Wybierz sposób płatności</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="pb-2 bold">Po zakończeniu płatności prosimy o chwilę cierpliwości. Jeśli&nbsp;wszytko
                        przebiegnie poprawnie, to
                        okno zostanie automatycznie zamknięte.<br/><br/>Dziękujemy!
                        <hr/>
                    </div>
                    <div class="modal-form"></div>
                    <div id="paypal-button-container"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger">Zamknij</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
